-- Roblox飞行脚本（按F启停，WASD控制方向，空格上升，左Shift下降）
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- 飞行状态开关
local isFlying = false
local flySpeed = 50 -- 飞行速度，可调整

-- 飞行核心逻辑
local function toggleFly()
    isFlying = not isFlying
    humanoid.Fly = isFlying -- 开启/关闭官方飞行模式
    humanoid.WalkSpeed = isFlying and 0 or 16 -- 飞行时禁用步行速度
    
    -- 飞行时持续调整高度（按空格/Shift控制）
    while isFlying do
        local camera = workspace.CurrentCamera
        local direction = camera.CFrame.LookVector -- 跟随镜头方向
        
        -- 方向控制（WASD）
        if player:GetMouse().KeyDown:FindFirstChild("W") then
            rootPart.Velocity = direction * flySpeed
        elseif player:GetMouse().KeyDown:FindFirstChild("S") then
            rootPart.Velocity = -direction * flySpeed
        end
        
        -- 高度控制（空格上升，Shift下降）
        if player:GetMouse().KeyDown:FindFirstChild("Space") then
            rootPart.Velocity = Vector3.new(rootPart.Velocity.X, flySpeed/2, rootPart.Velocity.Z)
        elseif player:GetMouse().KeyDown:FindFirstChild("LeftShift") then
            rootPart.Velocity = Vector3.new(rootPart.Velocity.X, -flySpeed/2, rootPart.Velocity.Z)
        end
        
        wait(0.01) -- 稳定帧率
    end
end

-- 绑定F键启停飞行
player:GetMouse().KeyDown:Connect(function(key)
    if key == "f" then
        toggleFly()
    end
end)

print("飞行脚本已加载！按F键开启/关闭飞行，WASD控制方向，空格上升，Shift下降")
